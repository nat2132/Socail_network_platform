<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/> 
    <link rel="stylesheet" href="calander.css">
    <title>Calander</title>
</head>
<body>
    <aside class="sidebar">
        <nav class="nav flex-column">
            <a class="nav-link" href="#">
                <div class="s-image-d navbar-brand"></div>
              </a>
          <a class="nav-link" href="home.html">
            <i class="material-icons size nav-icon">home</i>
            <span class="size-text">Home</span>
          </a>
          <a class="nav-link  actives" href="calander.html">
            <i class="material-icons size nav-icon">calendar_month</i>
            <span class="">Calendar</span>
          </a>
          <a class="nav-link" href="message.html">
            <i class="material-icons size nav-icon">chat</i>
            <span class="size-text">Messages</span>
          </a>
          <a class="nav-link" href="video.html">
            <i class="material-icons size nav-icon">subscriptions</i>
            <span class="size-text">Videos</span>
          </a>
          <a class="nav-link" href="saved.html">
            <i class="material-icons size nav-icon">bookmark</i>
            <span class="size-text">Saved</span>
          </a>
          <a class="nav-link" href="#">
            <i class="material-icons size nav-icon">search</i>
            <span class="size-text" id="search-icon">Search</span>
          </a>
          <a class="nav-link" href="your_profile.html">
            <i class="material-icons size nav-icon">account_circle</i>
            <span class="size-text">Account Settings</span>
          </a>
          <a class="nav-link" href="#">
            <i class="material-icons size nav-icon">logout</i>
            <span class="size-text">Logout</span>
          </a>
        </nav>
      </aside>
    <main class="main-container">
        <div class="container">
            <h1 class="head">Calendar</h1>
            <div id="calendar" class="custom-calendar"></div>
            <i class="material-icons add" id="addIcon">add_circle</i>

            <div class="overlay" id="overlay"></div>
        
            <div class="popup" id="popupForm">
                <div class="popup-header">Create Event</div>
                <span class="material-icons popup-close" id="closePopup">close</span>
                <form class="popup-form">
                    <input type="text" placeholder="Event Title" required>
                    <input type="date" placeholder="Date" required>
                    <input type="time" placeholder="Time" required>
                    <textarea placeholder="Description" rows="4" required></textarea>
                    <button type="submit">Add Event</button>
                </form>
            </div>
           </div>
    </main>
    <div class="right">
        <div class="pro">
            <div class="pro-img"><img src="assets/images/48fb0979b0fbdd8e320622de39475b562ddad56d copy.png" alt="Helen Life"></div>
            <span class="pro-name">Helen Life</span>
            <span class="pro-status">Online</span>
            <span class="pro-role">Instructor</span>
        </div>
        <div class="notif">
            <i class="material-icons notif-icon">notifications</i>
            <div class="notif-num">5</div>
        </div>
        <div class="calendar light">
            <div class="calendar-header">
                <span class="month-picker" id="month-picker">February</span>
                <div class="year-picker">
                    <span class="year-change" id="prev-year">
                        <pre><</pre>
                    </span>
                    <span id="year">2021</span>
                    <span class="year-change" id="next-year">
                        <pre>></pre>
                    </span>
                </div>
            </div>
            <div class="calendar-body">
                <div class="calendar-week-day">
                    <div>Sun</div>
                    <div>Mon</div>
                    <div>Tue</div>
                    <div>Wed</div>
                    <div>Thu</div>
                    <div>Fri</div>
                    <div>Sat</div>
                </div>
                <div class="calendar-days"></div>
            </div>
            <div class="month-list"></div>
        </div>
        <ul class="legend">
            <li class="legend-item">
                <i class="material-icons legend-icon lunches"></i>
                <span class="legend-text">Lunches</span>
            </li>
            <li class="legend-item">
                <i class="material-icons legend-icon meetings"></i>
                <span class="legend-text">Meetings</span>
            </li>
            <li class="legend-item">
                <i class="material-icons legend-icon events"></i>
                <span class="legend-text">Events</span>
            </li>
            <li class="legend-item">
                <i class="material-icons legend-icon reminders"></i>
                <span class="legend-text">Reminders</span>
            </li>
            <li class="legend-item">
                <i class="material-icons legend-icon tasks"></i>
                <span class="legend-text">Tasks</span>
            </li>
        </ul>
    </div>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.14/index.global.min.js'></script>
    <script>

document.addEventListener('DOMContentLoaded', function () {
  var calendarEl = document.getElementById('calendar');

  var calendar = new FullCalendar.Calendar(calendarEl, {
    timeZone: 'UTC',
    themeSystem: 'bootstrap5',
    headerToolbar: {
      left: 'prev,next today',
      center: 'title',
      right: 'dayGridMonth,timeGridWeek,timeGridDay,listMonth'
    },
    weekNumbers: true,
    dayMaxEvents: true, // allow "more" link when too many events
    events: [
        {
          title: 'All Day Event',
          start: '2024-06-01'
        },
        {
          title: 'Long Event',
          start: '2024-06-05',
          end: '2024-06-10'
        },
        {
          groupId: 999,
          title: 'Repeating Event',
          start: '2024-06-09T16:00:00'
        },
        {
          groupId: 999,
          title: 'Repeating Event',
          start: '2024-06-16T16:00:00'
        },
        {
          title: 'Conference',
          start: '2024-06-11',
          end: '2024-06-13'
        },
        {
          title: 'Meeting',
          start: '2024-06-12T10:30:00',
          end: '2024-06-12T12:30:00'
        },
        {
          title: 'Lunch',
          start: '2024-06-12T12:00:00'
        },
        {
          title: 'Meeting',
          start: '2024-06-12T14:30:00'
        },
        {
          title: 'Happy Hour',
          start: '2024-06-12T17:30:00'
        },
        {
          title: 'Dinner',
          start: '2024-06-12T20:00:00'
        },
        {
          title: 'Birthday Party',
          start: '2024-06-13T07:00:00'
        },
        {
          title: 'Click for Google',
          url: 'http://google.com/',
          start: '2024-06-28'
        }
      ]
  });

  calendar.render();
});

      let calendar = document.querySelector('.calendar')

const month_names = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']

isLeapYear = (year) => {
    return (year % 4 === 0 && year % 100 !== 0 && year % 400 !== 0) || (year % 100 === 0 && year % 400 ===0)
}

getFebDays = (year) => {
    return isLeapYear(year) ? 29 : 28
}

generateCalendar = (month, year) => {

    let calendar_days = calendar.querySelector('.calendar-days')
    let calendar_header_year = calendar.querySelector('#year')

    let days_of_month = [31, getFebDays(year), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]

    calendar_days.innerHTML = ''

    let currDate = new Date()
    if (!month) month = currDate.getMonth()
    if (!year) year = currDate.getFullYear()

    let curr_month = `${month_names[month]}`
    month_picker.innerHTML = curr_month
    calendar_header_year.innerHTML = year

    // get first day of month
    
    let first_day = new Date(year, month, 1)

    for (let i = 0; i <= days_of_month[month] + first_day.getDay() - 1; i++) {
        let day = document.createElement('div')
        if (i >= first_day.getDay()) {
            day.classList.add('calendar-day-hover')
            day.innerHTML = i - first_day.getDay() + 1
            day.innerHTML += `<span></span>
                            <span></span>
                            <span></span>
                            <span></span>`
            if (i - first_day.getDay() + 1 === currDate.getDate() && year === currDate.getFullYear() && month === currDate.getMonth()) {
                day.classList.add('curr-date')
            }
        }
        calendar_days.appendChild(day)
    }
}

let month_list = calendar.querySelector('.month-list')

month_names.forEach((e, index) => {
    let month = document.createElement('div')
    month.innerHTML = `<div data-month="${index}">${e}</div>`
    month.querySelector('div').onclick = () => {
        month_list.classList.remove('show')
        curr_month.value = index
        generateCalendar(index, curr_year.value)
    }
    month_list.appendChild(month)
})

let month_picker = calendar.querySelector('#month-picker')

month_picker.onclick = () => {
    month_list.classList.add('show')
}

let currDate = new Date()

let curr_month = {value: currDate.getMonth()}
let curr_year = {value: currDate.getFullYear()}

generateCalendar(curr_month.value, curr_year.value)

document.querySelector('#prev-year').onclick = () => {
    --curr_year.value
    generateCalendar(curr_month.value, curr_year.value)
}

document.querySelector('#next-year').onclick = () => {
    ++curr_year.value
    generateCalendar(curr_month.value, curr_year.value)
}

document.getElementById('addIcon').addEventListener('click', function() {
            document.getElementById('popupForm').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        });

        document.getElementById('closePopup').addEventListener('click', function() {
            document.getElementById('popupForm').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        });

        document.getElementById('overlay').addEventListener('click', function() {
            document.getElementById('popupForm').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        });

    </script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>
